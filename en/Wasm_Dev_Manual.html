<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Getting started · PlatON</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="### Introduction"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Getting started · PlatON"/><meta property="og:type" content="website"/><meta property="og:url" content="https://luo-dahui.github.io//docs/"/><meta property="og:description" content="### Introduction"/><meta property="og:image" content="https://luo-dahui.github.io//docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://luo-dahui.github.io//docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/docs/img/logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@8.4.0/dist/mermaid.min.js"></script><script type="text/javascript" src="/docs/js/custom.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="https://www.platon.network/?lang=en"><img class="logo" src="/docs/img/PlatON-logo.svg" alt="PlatON"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#">English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/zh-CN/Wasm_Dev_Manual">中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Wasm contract</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/">Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Basics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/lat_introduced">Intro to LAT</a></li><li class="navListItem"><a class="navItem" href="/docs/en/staking_and_delegation">Staking&amp;Delegation</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Network_Description">Networks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Advanced<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/PlatON_Overall_Solution">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Economic_Model">Economic model</a></li><li class="navListItem"><a class="navItem" href="/docs/en/PlatON_Solution">Consensus mechanism</a></li><li class="navListItem"><a class="navItem" href="/docs/en/PlatON_Governance_Solution">Governance mechanism</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Wasm_Operation_Principle">WebAssembly(Wasm)</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">PlatON Node<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/PlatON_Validation_Introduce">Intro to validator</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Become_PlatON_Main_Verification">Run a validator node</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tools for nodes</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/OnLine_MTool_Manual">MTool online tutorial</a></li><li class="navListItem"><a class="navItem" href="/docs/en/OffLine_MTool_Manual">MTool offline tutorial</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Command_Line_Tools">Command line tools</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Developers<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/PlatON_Overview_DevGuide">Development guide</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Set up local environment</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/Join_Dev_Network">Dev Network</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Build_Private_Chain">Private Network</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Smart contract</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/PlatON_system_contract">System contracts</a></li></ul></div><div class="navGroup subNavGroup sonNavGroup"><h4 class="navGroupSubcategoryTitle sonNavTitle">Solidity contract</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/Solidity_Dev_Manual">Getting started</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Solidity_Contract_Migrate">Migration tutorial</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Solidity_Contract_Dev_Costs">Development costs</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Solidity_Contract_Best_Practice">Best practices</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Solidity_Contract_Security_Dev_Guide">Contract security</a></li></ul></div><div class="navGroup subNavGroup sonNavGroup"><h4 class="navGroupSubcategoryTitle sonNavTitle">Wasm contract</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/Wasm_Dev_Manual">Getting started</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Wasm_Contract_Dev_Costs">Development Costs</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Wasm_Contract_Best_Practice">Best practices</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Wasm_Contract_API">Wasm API</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">References</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/Python_SDK">Python SDK</a></li><li class="navListItem"><a class="navItem" href="/docs/en/JS_SDK">JS SDK</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Java_SDK">Java SDK</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Json_Rpc">JSON-RPC</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Samurai_API">Samurai API</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/en/Standard">PRC Token</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Data and analytics<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/PlatON_BlockChain_Browser">PlatScan</a></li><li class="navListItem"><a class="navItem" href="/docs/en/PlatEye">PlatEye</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Wallet<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/ATON-user-manual">ATON Wallet</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Samurai_user_manual">Samurai</a></li><li class="navListItem"><a class="navItem" href="/docs/en/Third_Party_Walle">Third-party wallets</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">community<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/community">Community Projects</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/PlatONnetwork/docs/tree/master/docs/wasm入门手册.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Getting started</h1></header><article><div><span><h3><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h3>
<p>This tutorial is mainly to guide users to create a simple HelloWorld smart contract using wasm language on PlatON, compile, deploy, and call this contract through platon-truffle.If you want to use a richer API.</p>
<h3><a class="anchor" aria-hidden="true" id="platon-truffle-introduction"></a><a href="#platon-truffle-introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Platon-truffle Introduction</h3>
<p>Platon-truffle is a tool provided by PlatON that can compile, deploy, and invoke smart contracts locally. For specific installation and usage manuals, refer to:</p>
<ul>
<li>Platon-truffle develop tools<a href="https://platon-truffle.readthedocs.io/en/v1.0.0/getting-started/installation.html">specific installation</a></li>
<li>Platon-truffle develop tools<a href="https://platon-truffle.readthedocs.io/en/v1.0.0/">usage manuals</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="create-helloworld-contract"></a><a href="#create-helloworld-contract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create HelloWorld Contract</h3>
<pre><code class="hljs css language-c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;platon/platon.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> platon;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">message</span> {</span>
   <span class="hljs-keyword">public</span>:
      <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> head;
      PLATON_SERIALIZE(message, (head))
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">my_message</span> :</span> <span class="hljs-keyword">public</span> message {
   <span class="hljs-keyword">public</span>:
      <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> body;
      <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> <span class="hljs-built_in">end</span>;
      PLATON_SERIALIZE_DERIVED(my_message, message, (body)(<span class="hljs-built_in">end</span>))
};

CONTRACT HelloWorld : <span class="hljs-keyword">public</span> platon::Contract{
   <span class="hljs-keyword">public</span>:
      <span class="hljs-function">ACTION <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(<span class="hljs-keyword">const</span> my_message &amp;one_message)</span></span>{
        info.self().push_back(one_message);
      }

      <span class="hljs-function">ACTION <span class="hljs-keyword">void</span> <span class="hljs-title">add_message</span><span class="hljs-params">(<span class="hljs-keyword">const</span> my_message &amp;one_message)</span></span>{
          info.self().push_back(one_message);
      }

      <span class="hljs-function">CONST <span class="hljs-keyword">uint8_t</span> <span class="hljs-title">get_message_size</span><span class="hljs-params">()</span></span>{
          <span class="hljs-keyword">return</span> info.self().<span class="hljs-built_in">size</span>();
      }

      <span class="hljs-function">CONST <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> <span class="hljs-title">get_message_body</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> index)</span></span>{
          <span class="hljs-keyword">return</span> info.self()[index].body;
      }

   <span class="hljs-keyword">private</span>:
      platon::StorageType&lt;<span class="hljs-string">"myvector"</span>_n, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;my_message&gt;&gt; info;
};

PLATON_DISPATCH(HelloWorld, (init)(add_message)(get_message_size)(get_message_body))

</code></pre>
<p>Contract Files Description:</p>
<ul>
<li><p>Each contract file has only one contract class. The contract class is decorated with Contract. It must be publicly inherited from platon :: Contract and must have an init function.</p></li>
<li><p>ACTION and CONST qualified member functions represent callable functions, and such member functions cannot be overloaded. The ACTION function will modify the data on the chain. The CONST function just queries the attributes and does not modify the data on the chain.</p></li>
<li><p>The type in the callable function parameter list is a custom type. In this type definition, you need to add the PLATON_SERIALIZE macro to declare the serialization function. This type inherits from other types. You need to add the PLATON_SERIALIZE_DERIVED macro to declare the serialization function.</p></li>
<li><p>Callable functions can only be called externally if the unified entry function is defined in the PLATON_DISPATCH macro.</p></li>
<li><p>At present, platon will persistently store member variables of the contract class. The member variables must be of type platon :: StorageType. The first parameter string of the platon :: StorageType template is followed by _n, and the string must be .12345abcdefghijklmnopqrstuvwxyz. 32 characters Characters. The second parameter is the concrete type of the actual storage. Member function modification member variables need to obtain an instance of a specific type through the self () function, and then execute the corresponding instance function.</p></li>
<li><p>The second parameter type of the platon :: StorageType template is a custom type. A PLATON_SERIALIZE macro must be added to this type definition to declare a serialization function. This type inherits from other types. A PLATON_SERIALIZE_DERIVED macro must be added to declare a serialization function.</p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="compile-helloworld-contract"></a><a href="#compile-helloworld-contract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compile HelloWorld Contract</h3>
<p><strong>Step1.</strong> Creat new directory for HelloWorld project</p>
<pre><code class="hljs"><span class="hljs-built_in">mkdir</span> HelloWorld &amp;&amp; <span class="hljs-built_in">cd</span> HelloWorld
</code></pre>
<ul>
<li>The following commands are performed in the HelloWorld directory without special instructions</li>
</ul>
<p><strong>Step2.</strong>  Init project</p>
<pre><code class="hljs"><span class="hljs-attribute">platon-truffle init</span>
</code></pre>
<p>After the command is executed, project directory structure is as follows:</p>
<ul>
<li><p><code>contracts/</code> wasm contract directory</p></li>
<li><p><code>migrations/</code> depoly file directory</p></li>
<li><p><code>test/</code> test script directory</p></li>
<li><p><code>truffle-config.js</code> platon-truffle config</p></li>
</ul>
<p><strong>Step3.</strong> Move HelloWorld contract compiled in to HelloWorld/contracts/</p>
<pre><code class="hljs"><span class="hljs-keyword">ls</span> contracts/
</code></pre>
<ul>
<li>HelloWorld.cpp</li>
</ul>
<p><strong>Step4.</strong> Modify the platon-truffle configuration file truffle-config.js and add the compiled wasm contract version number</p>
<pre><code class="hljs">vim truffle-<span class="hljs-built_in">config</span>.<span class="hljs-keyword">js
</span></code></pre>
<p>Truffle-config.js content is  as follows:</p>
<pre><code class="hljs"><span class="hljs-selector-tag">compilers</span>: {
     <span class="hljs-attribute">wasm</span>: {
           version: <span class="hljs-string">"1.0.0"</span>
     }
}
</code></pre>
<p><strong>Step5.</strong>  Compile contract</p>
<pre><code class="hljs"><span class="hljs-attribute">platon-truffle compile</span>
</code></pre>
<p>After the command is executed, project directory structure is as follows:</p>
<ul>
<li><code>build/</code> wasm contract directory after compiled</li>
<li><code>build/contracts/HelloWorld.abi.json</code>  HelloWorld contract compiled abi interface file</li>
<li><code>build/contracts/HelloWorld.wasm</code>  HelloWorld contract compiled binary</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="deploly-helloworld-contract"></a><a href="#deploly-helloworld-contract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploly HelloWorld Contract</h3>
<p><strong>Step1.</strong> Setting config  information for blockchain in truffle-config.js</p>
<pre><code class="hljs">vim truffle-<span class="hljs-built_in">config</span>.<span class="hljs-keyword">js
</span></code></pre>
<p>Set blockchain network  info</p>
<pre><code class="hljs"><span class="hljs-symbol">networks:</span> {
<span class="hljs-symbol">    development:</span> {
<span class="hljs-symbol">       host:</span> <span class="hljs-string">"10.1.1.6"</span>,     <span class="hljs-comment">// blockchain server address</span>
<span class="hljs-symbol">       port:</span> <span class="hljs-number">8806</span>,            <span class="hljs-comment">// server port</span>
<span class="hljs-symbol">       network_id:</span> <span class="hljs-string">"*"</span>,       <span class="hljs-comment">// Any network (default: none)</span>
<span class="hljs-symbol">       from:</span> <span class="hljs-string">"lax1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl"</span>,
<span class="hljs-symbol">       gas:</span> <span class="hljs-number">999999</span>,
<span class="hljs-symbol">       gasPrice:</span> <span class="hljs-number">1000000000</span>,
    },
}
</code></pre>
<p><strong>step2.</strong>  Unlock wallet account</p>
<p>Enter the platon-truffle console</p>
<pre><code class="hljs">platon-truffle<span class="hljs-built_in"> console
</span></code></pre>
<p>Import the private key (you can skip this step if you have already imported it)</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.personal</span><span class="hljs-selector-class">.importRawKey</span>("<span class="hljs-selector-tag">Your</span> <span class="hljs-selector-tag">wallet</span> <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">key</span>","<span class="hljs-selector-tag">Your</span> <span class="hljs-selector-tag">wallet</span> <span class="hljs-selector-tag">password</span>");
</code></pre>
<p>Successful import will see the address corresponding to the private key as follows：</p>
<pre><code class="hljs"><span class="hljs-symbol">'lax1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl</span>'
</code></pre>
<p>Unlock wallet account</p>
<pre><code class="hljs"> web3.platon.personal.unlock<span class="hljs-constructor">Account('Your <span class="hljs-params">wallet</span> <span class="hljs-params">address</span>','Your <span class="hljs-params">wallet</span> <span class="hljs-params">password</span>',999999)</span>;
</code></pre>
<p>After unlocking successfully, you will see the following information：</p>
<pre><code class="hljs"><span class="hljs-attribute">ture</span>
</code></pre>
<p><strong>Step3.</strong> Deploy contract</p>
<pre><code class="hljs">platon-truffle <span class="hljs-keyword">deploy</span> <span class="hljs-params">--wasm</span> <span class="hljs-params">--contract-name</span> HelloWorld <span class="hljs-params">--params</span> '[[[<span class="hljs-string">"1"</span>], <span class="hljs-string">"2"</span>, <span class="hljs-string">"3"</span>]]'
</code></pre>
<ul>
<li><code>HelloWorld</code> deployed contract</li>
<li><code>params</code> parameters of contract init function</li>
</ul>
<p>If deploying successfully，you will see log info as follows:</p>
<pre><code class="hljs">receipt:  { blockHash:
   '0x<span class="hljs-number">266733</span>b693ba<span class="hljs-number">650315</span>a59c34e<span class="hljs-number">7280</span>4c06ca3e27fab<span class="hljs-number">14562579</span>7bd<span class="hljs-number">4225</span>9b572c5',
  blockNumber: <span class="hljs-number">70441</span>,
  contractAddress: 'lax1p<span class="hljs-number">0698</span>y95s6ysfphxavl36hywppq0mz6ks673np',
  cumulativeGasUsed: <span class="hljs-number">291314</span>,
  from: 'lax1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl',
  gasUsed: <span class="hljs-number">291314</span>,
  logs: [],
  logsBloom:
   '0x<span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000</span>',
  status: true,
  to: <span class="hljs-literal">null</span>,
  transactionHash:
   '0x<span class="hljs-number">6094</span>6ebf0ccddc76a<span class="hljs-number">0234353435</span>de73e<span class="hljs-number">7901888227</span>fb2f<span class="hljs-number">0392</span>2fb0ce265a4e9d',
  transactionIndex: <span class="hljs-number">0</span> }
  contract HelloWorld deployed successfully
======================

   &gt; transactionHash:     <span class="hljs-number">0</span>x60946ebf0ccddc76a0234353435de73e7901888227fb2f03922fb0ce265a4e9d
   &gt; contract address:    lax1p0698y95s6ysfphxavl36hywppq0mz6ks673np
   &gt; block number:        <span class="hljs-number">70441</span>
   &gt; block timestamp:     <span class="hljs-number">1583247148341</span>
   &gt; account:             lax1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl
   &gt; balance:             <span class="hljs-number">3533694129556768659166595001485837031654967793751237866225582808584074296</span>
   &gt; gas limit:           <span class="hljs-number">100000000</span>
   &gt; gas used:            <span class="hljs-number">291314</span>
   &gt; gas price:           <span class="hljs-number">0.000000050000000004</span> LAT
   &gt; total cost:          <span class="hljs-number">0.014565700001165256</span> LAT
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="call-helloworld-contract"></a><a href="#call-helloworld-contract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Call HelloWorld Contract</h3>
<p><strong>Step1.</strong>  Enter the platon-truffle console</p>
<pre><code class="hljs">platon-truffle<span class="hljs-built_in"> console
</span></code></pre>
<ul>
<li>You can execute command in platon-truffle console</li>
</ul>
<p><strong>Step2.</strong>  Create contract object</p>
<pre><code class="hljs css language-json">var abi = [{"baseclass":[],"fields":[{"name":"head","type":"string"}],"name":"message","type":"struct"},{"baseclass":["message"],"fields":[{"name":"body","type":"string"},{"name":"end","type":"string"}],"name":"my_message","type":"struct"},{"constant":false,"input":[{"name":"one_message","type":"my_message"}],"name":"init","output":"void","type":"Action"},{"constant":false,"input":[{"name":"one_message","type":"my_message"}],"name":"add_message","output":"void","type":"Action"},{"constant":true,"input":[],"name":"get_message_size","output":"uint8","type":"Action"},{"constant":true,"input":[{"name":"index","type":"uint8"}],"name":"get_message_body","output":"string","type":"Action"}];
var contractAddr = 'lax1p0698y95s6ysfphxavl36hywppq0mz6ks673np';

var helloworld = new web3.platon.Contract(abi,contractAddr,{vmType: 1 }); 
</code></pre>
<p>Description：</p>
<ul>
<li><code>abi</code>  the interface provided by the contract to external calls，the abi  in the file compiled ：<code>HelloWorld/build/contracts/HelloWorld.json</code></li>
<li><code>contractAddr</code> contract address</li>
<li><code>helloWorld</code> contract object created</li>
</ul>
<p><strong>Step3.</strong>  Call contract</p>
<pre><code class="hljs css language-javascript">helloworld.methods.add_message(<span class="hljs-string">'[[["5"], "6", "7"]]'</span>).send({
    <span class="hljs-attr">from</span>: <span class="hljs-string">'lax1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl'</span>,<span class="hljs-attr">gas</span>: <span class="hljs-number">999999</span>
}).on(<span class="hljs-string">'receipt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receipt</span>) </span>{
    <span class="hljs-built_in">console</span>.log(receipt);
}).on(<span class="hljs-string">'error'</span>, <span class="hljs-built_in">console</span>.error);
</code></pre>
<p>Description：</p>
<ul>
<li><code>helloWorld</code> the contract object created</li>
<li><code>methods</code> specify the call method</li>
<li><code>add_message</code>  method in the HelloWorld contract with a custom my_message input</li>
<li><code>from</code> caller's wallet address</li>
<li><code>on</code> listen to the result of the contract method executed. If failed, it will print the error info. If succeeded, the console will print the receipt as belows:</li>
</ul>
<pre><code class="hljs">{ blockHash:
   '0x669c7b8cb938cc<span class="hljs-number">3084</span>5e08dc4ceda08f2e<span class="hljs-number">1720</span>7c267ade97dc<span class="hljs-number">5458</span>b<span class="hljs-number">44540573</span>6',
  blockNumber: <span class="hljs-number">74665</span>,
  contractAddress: <span class="hljs-literal">null</span>,
  cumulativeGasUsed: <span class="hljs-number">108549</span>,
  from: 'lax1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl',
  gasUsed: <span class="hljs-number">108549</span>,
  logsBloom:
   '0x<span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000</span>',
  status: true,
  to: 'lax1p<span class="hljs-number">0698</span>y95s6ysfphxavl36hywppq0mz6ks673np',
  transactionHash:
   '0x2b5e590df7e70ad428b1ccb06bda5dcce47f84c4d981c2fb475aca9ec9d<span class="hljs-number">0000</span>a',
  transactionIndex: <span class="hljs-number">0</span>,
  events: {} }
{ blockHash:
   '0x669c7b8cb938cc<span class="hljs-number">3084</span>5e08dc4ceda08f2e<span class="hljs-number">1720</span>7c267ade97dc<span class="hljs-number">5458</span>b<span class="hljs-number">44540573</span>6',
  blockNumber: <span class="hljs-number">74665</span>,
  contractAddress: <span class="hljs-literal">null</span>,
  cumulativeGasUsed: <span class="hljs-number">108549</span>,
  from: 'lax1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl',
  gasUsed: <span class="hljs-number">108549</span>,
  logsBloom:
   '0x<span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000000000</span><span class="hljs-number">00000000</span>',
  status: true,
  to: 'lax1p<span class="hljs-number">0698</span>y95s6ysfphxavl36hywppq0mz6ks673np',
  transactionHash:
   '0x2b5e590df7e70ad428b1ccb06bda5dcce47f84c4d981c2fb475aca9ec9d<span class="hljs-number">0000</span>a',
  transactionIndex: <span class="hljs-number">0</span>,
  events: {} }
</code></pre>
<p><strong>Step4.</strong>  Query contract</p>
<pre><code class="hljs css language-javascript">helloworld.methods.get_message_body(<span class="hljs-number">0</span>).call()
</code></pre>
<p>Description：</p>
<ul>
<li><code>helloWorld</code> the contract object created</li>
<li><code>methods</code> specify the call method</li>
<li><code>get_message_body</code> method in the HelloWorld contract, which has an input parameter of type int</li>
<li><code>call</code> specify the query method</li>
</ul>
<hr>
<h2><a class="anchor" aria-hidden="true" id="faq"></a><a href="#faq" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FAQ</h2>
<h3><a class="anchor" aria-hidden="true" id="about-compile"></a><a href="#about-compile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>About Compile</h3>
<ol>
<li><p>How to use <code>platon-cpp</code> for compile multiple <code>cpp</code> files?</p>
<pre><code class="hljs css language-shell">platon-cpp ./test.cpp ./test1.cpp
</code></pre>
<p>Only allowing exists one contract class.</p></li>
<li><p>How to specified output directory and filename when use <code>platon-cpp</code>
to compile contract?</p>
<p>Use <code>-o</code> flag, and must be specified output directory and filename at the
same time.</p>
<pre><code class="hljs css language-shell">platon-cpp ./test.cpp -o ./out/test.wasm
</code></pre></li>
<li><p>What data types does ABI support?</p>
<p>Generate ABI supported types and conversion rules as follows:</p></li>
</ol>
<table>
<thead>
<tr><th>Type</th><th>ABI</th></tr>
</thead>
<tbody>
<tr><td>bool</td><td>bool</td></tr>
<tr><td>uint8_t</td><td>uint8</td></tr>
<tr><td>uint16_t</td><td>uint16</td></tr>
<tr><td>uint32_t</td><td>uint32</td></tr>
<tr><td>uint64_t</td><td>uint64</td></tr>
<tr><td>int8_t</td><td>int8</td></tr>
<tr><td>int16_t</td><td>int16</td></tr>
<tr><td>int32_t</td><td>int32</td></tr>
<tr><td>int64_t</td><td>int64</td></tr>
<tr><td>bytes</td><td>uint8[]</td></tr>
<tr><td>std::string</td><td>string</td></tr>
<tr><td>std::vector<T></td><td>T[]</td></tr>
<tr><td>std::array[T, N]</td><td>T[N]</td></tr>
<tr><td>std::pair&lt;T, U&gt;</td><td>pair&lt;T, U</td></tr>
<tr><td>std::set<T></td><td>set<T></td></tr>
<tr><td>std::map&lt;T, V&gt;</td><td>map&lt;T, V&gt;</td></tr>
<tr><td>std::list<T></td><td>list<T></td></tr>
<tr><td>FixedHash<N></td><td>FixedHash<N></td></tr>
<tr><td>u128</td><td>uint128</td></tr>
<tr><td>bigint</td><td>uint128</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="about-contract"></a><a href="#about-contract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>About Contract</h3>
<ol>
<li><p>How to output contract debug logs in the <code>platon</code> process?</p>
<ul>
<li><p>Add <code>#undef NDEBUG</code> at the first line of contract codes, and must before
header file included.</p>
<pre><code class="hljs css language-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">undef</span> NDEBUG</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;platon/platon.hpp&gt;</span></span>

<span class="hljs-comment">//...</span>
</code></pre></li>
<li><p><code>platon</code> startup command specifies log level 4 and enable debug flag.</p>
<pre><code class="hljs css language-cpp">./platon --debug --verbosity <span class="hljs-number">4</span> ...
</code></pre></li>
</ul></li>
<li><p>How to write a contract can effectively reduce Gas consumption?</p>
<ul>
<li><p>Use reference arguments</p>
<pre><code class="hljs css language-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; str)</span> </span>{}
</code></pre></li>
<li><p>Return rvalue reference</p></li>
</ul>
<pre><code class="hljs css language-cpp"><span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt;&amp;&amp; <span class="hljs-title">test</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt; v;
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::move(v);
}
</code></pre>
<ul>
<li>Try not to apply for large blocks of memory</li>
</ul></li>
<li><p>What should I pay attention to when using <code>StorageType</code>?</p>
<ul>
<li>Should be initialized in <code>init()</code>
<pre><code class="hljs css language-cpp"> CONTRAT Hello : <span class="hljs-keyword">public</span> Contract {
 <span class="hljs-keyword">public</span>:
   <span class="hljs-function">ACTION <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>{
       s_.self() = <span class="hljs-string">"test"</span>;
   }
 <span class="hljs-keyword">private</span>:
   StorageType&lt;<span class="hljs-string">"test"</span>_n, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt; s_;
 };
</code></pre></li>
</ul>
<pre><code class="hljs"><span class="hljs-bullet">  
- </span>It is recommended to use a specialized type of <span class="hljs-code">`StorageType`</span> directly
<span class="hljs-bullet">  
  + </span>Uint8
<span class="hljs-bullet">  + </span>Int8
<span class="hljs-bullet">  + </span>Uint16
<span class="hljs-bullet">  + </span>Int16
<span class="hljs-bullet">  + </span>Uint
<span class="hljs-bullet">  + </span>Int
<span class="hljs-bullet">  + </span>Uint64
<span class="hljs-bullet">  + </span>Int64
<span class="hljs-bullet">  + </span>String
<span class="hljs-bullet">  + </span>Vector
<span class="hljs-bullet">  + </span>Set
<span class="hljs-bullet">  + </span>Map
<span class="hljs-bullet">  + </span>Array
<span class="hljs-bullet">  + </span>Tuple
</code></pre></li>
<li><p>What is the difference between <code>StorageType</code> and <code>platon::db::Map</code>,
<code>platon::db::Array</code>?</p>
<p>From the underlying storage level, the implementation of <code>StorageType</code> is
serialized as a whole, and then stored in the database. <code>platon::db::Map</code>
and <code>platon::db::Array</code> serialize each element of the container as K/V is
stored to the database. For large-scale data, <code>platon::db::Map</code> and
<code>platon::db::Array</code> perform better.</p>
<p>When implementing a contract, a suitable storage structure should be
selected based on the size of the data.</p></li>
<li><p>RLP serialization/deserialization What C++ standard library types are
supported?</p>
<p>The following C ++ standard library types are supported:</p>
<ul>
<li>std::string</li>
<li>std::vector</li>
<li>std::map</li>
<li>std::list</li>
<li>std::array</li>
<li>std::set</li>
<li>std::pair</li>
<li>std::tuple</li>
</ul></li>
<li><p>How do custom types support RLP serialization/deserialization?</p>
<ul>
<li>Macro <code>PLATON_SERIALIZE</code> for common types</li>
</ul>
<pre><code class="hljs css language-cpp">   <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Base</span> {</span>
   <span class="hljs-keyword">int</span> a;
   <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> b;

   PLATON_SERIALIZE(Base, (a)(b));
   };
</code></pre>
<ul>
<li>The derived class uses the macro <code>PLATON_SERIALIZE_DERIVED</code>, and the base class also uses the macro <code>PLATON_SERIALIZE</code></li>
</ul>
<pre><code class="hljs css language-cpp"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Derived</span> :</span> <span class="hljs-keyword">public</span> Base {
  <span class="hljs-keyword">int</span> c;
  <span class="hljs-keyword">int</span> d;

  PLATON_SERIALIZE_DERIVED(Derived, Base, (c)(d));
};
</code></pre></li>
</ol>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/Solidity_Contract_Security_Dev_Guide"><span class="arrow-prev">← </span><span>Contract security</span></a><a class="docs-next button" href="/docs/en/Wasm_Contract_Dev_Costs"><span>Development Costs</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#faq">FAQ</a><ul class="toc-headings"><li><a href="#about-compile">About Compile</a></li><li><a href="#about-contract">About Contract</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.platon.network/en" class="nav-home"><img src="/docs/img/PlatON-logo2.svg" alt="PlatON" width="66" height="58"/></a><div><a href="https://www.platon.network/en">PlatON network</a><a href="https://latticex.foundation/home">Lattice.Foundation</a><a href="https://forum.latticex.foundation/">Forum</a></div><div class="gitstar"><a class="github-button" href="https://github.com/PlatONnetwork/PlatON-Go" data-color-scheme="no-preference: light; light: light; dark: light;" data-icon="octicon-star" data-size="small" data-show-count="true" aria-label="Star PlatONnetwork/PlatON-Go on GitHub">Star</a></div></section><section class="copyright">COPYRIGHT  © 2021 PLATON NETWORK.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'c2ce4863993980eb049b661be250c773',
                indexName: 'platon',
                inputSelector: '#search_input_react',
                algoliaOptions: {"hitsPerPage":10}
              });
            </script></body></html>